<!DOCTYPE html><html lang="en"><head><style type="text/css">.dismissButton{background-color:#fff;border:1px solid #dadce0;color:#1a73e8;border-radius:4px;font-family:Roboto,sans-serif;font-size:14px;height:36px;cursor:pointer;padding:0 24px}.dismissButton:hover{background-color:rgba(66,133,244,0.04);border:1px solid #d2e3fc}.dismissButton:focus{background-color:rgba(66,133,244,0.12);border:1px solid #d2e3fc;outline:0}.dismissButton:hover:focus{background-color:rgba(66,133,244,0.16);border:1px solid #d2e2fd}.dismissButton:active{background-color:rgba(66,133,244,0.16);border:1px solid #d2e2fd;box-shadow:0 1px 2px 0 rgba(60,64,67,0.3),0 1px 3px 1px rgba(60,64,67,0.15)}.dismissButton:disabled{background-color:#fff;border:1px solid #f1f3f4;color:#3c4043}
</style><link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700"><style type="text/css">.gm-style .gm-style-cc span,.gm-style .gm-style-cc a,.gm-style .gm-style-mtc div{font-size:10px}
</style><style type="text/css">@media print {  .gm-style .gmnoprint, .gmnoprint {    display:none  }}@media screen {  .gm-style .gmnoscreen, .gmnoscreen {    display:none  }}</style><style type="text/css">.gm-style-pbc{transition:opacity ease-in-out;background-color:rgba(0,0,0,0.45);text-align:center}.gm-style-pbt{font-size:22px;color:white;font-family:Roboto,Arial,sans-serif;position:relative;margin:0;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}
</style>
    <title>WoRMS - World Register of Marine Species - Patellidae Rafinesque, 1815</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="google-site-verification" content="K3-dDlqPOhXjZBSl_DXhAQ9y-EoX2OogyHQaUtlaSR4">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png?=v2">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png?=v2">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png?=v2">
    <link rel="manifest" href="/images/favicon/manifest.json?=v2">
    <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg?=v2" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <link rel="shortcut icon" href="/images/favicon/favicon.ico?=v2">
    <link title="WoRMS search" type="application/opensearchdescription+xml" rel="search" href="/provider.xml">
    <link rel="stylesheet" type="text/css" href="http://www.marinespecies.org/aphia/css/third_party.css?1529305694">
<script type="text/javascript" src="http://www.marinespecies.org/aphia/js/third_party.js?1528791610"></script>
<script type="text/javascript" src="http://www.marinespecies.org/aphia/js/aphia.js?1531731336"></script>
<link type="text/css" rel="stylesheet" href="/styles.css?1511881241">

        <link rel="alternate" title="WoRMS latest taxa additions" href="http://www.marinespecies.org/aphia.php?p=rss" type="application/rss+xml">
        <link rel="alternate" title="WoRMS latest taxa edits" href="http://www.marinespecies.org/aphia.php?p=rss&amp;type=edit" type="application/rss+xml">
        <link rel="alternate" title="WoRMS latest taxa checked" href="http://www.marinespecies.org/aphia.php?p=rss&amp;type=check" type="application/rss+xml">
        <link rel="alternate" title="WoRMS latest distribution additions" href="http://www.marinespecies.org/aphia.php?p=rss&amp;what=dr" type="application/rss+xml">
        <link rel="alternate" title="WoRMS latest note additions" href="http://www.marinespecies.org/aphia.php?p=rss&amp;what=notes" type="application/rss+xml">
        <link rel="alternate" title="WoRMS latest vernacular additions" href="http://www.marinespecies.org/aphia.php?p=rss&amp;what=vernaculars" type="application/rss+xml">
        <link rel="alternate" title="WoRMS latest image additions" href="http://www.marinespecies.org/aphia.php?p=rss&amp;what=images" type="application/rss+xml">
<script language="javascript" type="text/javascript" src="aphia.php?p=js"></script>
<link rel="alternate" title="WoRMS latest attributes additions" href="http://www.marinespecies.org/aphia.php?p=rss&amp;what=at" type="application/rss+xml">
<script type="text/javascript" src="http://www.vliz.be/gis/ol/OpenLayers.js"></script>
<script type="text/javascript" src="http://www.vliz.be/gis/ol/deprecated.js"></script>
<script type="text/javascript" src="http://www.vliz.be/gis/ol/proj4js.js"></script>
<link rel="stylesheet" href="http://www.vliz.be/gis/ol/theme/default/google.css" type="text/css">
<script src="http://maps.google.com/maps/api/js?key=AIzaSyDF34mFqv3OOykawLg2jB2OTb3BUB53yrI"></script>
<link rel="stylesheet" href="http://www.marinespecies.org/aphia/css/taxdetails.css" type="text/css">
<link rel="meta" type="application/rdf+xml" title="RDF representation" href="http://www.marinespecies.org/authority/metadata.php?lsid=urn:lsid:marinespecies.org:taxname:113">
<link rel="stylesheet" type="text/css" href="http://www.marinespecies.org/aphia/css/aphia_core.css?1528791604">

<script>var aphia_jquery = $;</script><style>
                    h1, h2, h3 {
                        color: #256092;
                    }
                </style>

<link rel="stylesheet" type="text/css" href="http://www.vliz.be/gis/ol/theme/default/style.css"><script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps-api-v3/api/js/33/10/intl/zh_cn/common.js"></script><script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps-api-v3/api/js/33/10/intl/zh_cn/util.js"></script><script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps-api-v3/api/js/33/10/intl/zh_cn/map.js"></script><style type="text/css">.gm-style {
        font: 400 11px Roboto, Arial, sans-serif;
        text-decoration: none;
      }
      .gm-style img { max-width: none; }</style><script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps-api-v3/api/js/33/10/intl/zh_cn/onion.js"></script><script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps-api-v3/api/js/33/10/intl/zh_cn/controls.js"></script><script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps-api-v3/api/js/33/10/intl/zh_cn/stats.js"></script></head>
<body>

<div class="main_bg">
<div class="container-fluid">
    <div class="row">
        <nav class="navbar navbar-default worms-header">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header visible-xs">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation-shared,#navigation-content" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">
                    <img src="/images/layout/worms_logo.png" height="60px">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse worms-nav-menu" id="navigation-content">
                <div class="worms-nav-menu-table">
                    <div class="worms-nav-menu-table-cell-col1 hidden-xs">
                        <a class="navbar-left" href="/index.php">
                            <img src="/images/layout/worms_logo.png" height="100px">
                        </a>
                    </div>
                    <div class="worms-nav-menu-table-cell-col2">
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="/index.php">Home</a></li>
                            <li><a href="/about.php">About</a></li>
                            <li><a href="/subregisters.php">Subregisters</a></li>
                            <li><a href="/users.php">Users</a></li>
                            <li><a href="/photogallery.php">Photogallery</a></li>
                            <li><a href="/documents.php">Documents</a></li>
                            <li><a href="/lifewatch.php">LifeWatch</a></li>
                            <li><a href="/contribute.php">Contribute</a></li>
                        </ul>
                    </div>
                </div>
            </div><!-- /.navbar-collapse -->

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse aphia-nav-menu" id="navigation-shared">
                <div class="aphia-nav-menu-table">
                    <div class="aphia-nav-menu-table-cell-col1 hidden-xs">
                        <form id="aphia-quick-search-form" class="navbar-form navbar-left" action="/aphia.php?p=taxlist" method="post">
                            <div class="input-group" style="width: 280px;">
                                
    <script type="text/javascript">
        var comp_jquery = $;
        comp_jquery(document).ready(function() {
                            window.initAphiaComponentCombobox('3b1537035394d0bb', {
                            view_component_ajax_url: '/aphia.php?p=rest&__route__/AjaxAphiaRecordsByNamePart',
                view_component_ajax_request_delay: 500,                                view_dict_optional_ajax_args: {
                                    'rank_min': "10",
                                    'combine_vernaculars': "0",
                                    'marine_only': "1",
                                    'fossil_id': "4",
                                },                view_component_ajax_append_input_to_url: true,                                view_dict_dynamic_ajax_args: "if ($('#quick_search_inc_common').prop('checked')) { data['combine_vernaculars'] = 1; }",                view_component_ajax_dont_trigger_numbers: true,                        view_component_allow_user_text: true,                                                                                                view_selection_placeholder: 'Quick search...',            view_hidden_key_id: 'tid',                                    view_hidden_data_id: 'tName',                                                    });

        });
    </script>
        <div id="3b1537035394d0bb_storage" name="3b1537035394d0bb_storage"></div>
                                    <div class="input-group">
                                    <select id="3b1537035394d0bb" class="form-control input-sm select2-hidden-accessible" multiple="" tabindex="-1" aria-hidden="true"></select><span class="select2 select2-container select2-container--bootstrap" dir="ltr" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--multiple input-sm" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="-1"><ul class="select2-selection__rendered"><li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="0" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" placeholder="Quick search..." style="width: 0px;"></li></ul></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span> <span class="caret"></span></button>
                                        <ul class="dropdown-menu">
                                            <li class="quick_search_inc_chk"><a href="#" data-value="option1" tabindex="-1"><input id="quick_search_inc_scientific" checked="checked" disabled="disabled" type="checkbox">&nbsp;Scientific names</a></li>
                                            <li class="quick_search_inc_chk"><a href="#" data-value="option2" tabindex="-1"><input id="quick_search_inc_common" type="checkbox">&nbsp;Common names (slower)</a></li>
                                            <li class="quick_search_inc_chk"><a style="padding-left: 33px;" href="/aphia.php?p=search&amp;adv=1">&nbsp;Advanced search</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    $("#3b1537035394d0bb_storage").change(function(event) {
                                        $(".select2-search--inline").hide();
                                        var tid = $(this).children('input[name="tid"]').val();
                                        if (tid < 0) {
                                            //No id => means no value picked from the suggestion list => check text to be numeric
                                            tid = $(this).children('input[name="tName"]').val();
                                        }
                                        $("#3b1537035394d0bb").prop("disabled", true);
                                        if (!isNaN(tid) && isFinite(tid) && tid > 0 && tid % 1 === 0) {
                                            console.log('redirect...');
                                            window.location = "/aphia.php?p=taxdetails&id=" + tid;
                                        } else {
                                            $("#aphia-quick-search-form").submit();
                                        }
                                    });
                                </script>
                            </div>
                            <input type="hidden" name="searchpar" value="0">
                            <input type="hidden" name="tComp" value="begins">
                            <input type="hidden" name="action" value="search">
                            <input type="hidden" name="rSkips" value="0">
                                                        <input type="hidden" name="marine" value="1">
                            <input type="hidden" name="fossil" value="4">
                                                    </form>
                    </div>
                    <div class="aphia-nav-menu-table-cell-col2">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="active"><a href="/aphia.php?p=search"><span class="fa fa-search"></span>&nbsp;Taxa</a></li>
                            <li><a href="/aphia.php?p=sources"><span class="fa fa-graduation-cap fa-1x"></span>&nbsp;Literature</a></li>
                            <li><a href="/aphia.php?p=checklist"><span class="fa fa-map fa-1x"></span>&nbsp;Distribution</a></li>
                            <li><a href="/aphia.php?p=specimens"><span class="fa fa-tags fa-1x"></span>&nbsp;Specimen</a></li>
                                                        <li><a href="/aphia.php?p=editors"><span class="fa fa-users fa-1x"></span>&nbsp;Editors</a></li>
                            <li><a href="/aphia.php?p=stats"><span class="fa fa-line-chart fa-1x"></span>&nbsp;Statistics</a></li>
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="fa fa-gears fa-1x"></span>&nbsp;Tools
                                    <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="/aphia.php?p=match"><span class="fa fa-binoculars fa-1x"></span>&nbsp;Match taxa</a></li>
                                    <li><a href="/aphia.php?p=webservice"><span class="fa fa-globe fa-1x"></span>&nbsp;Webservices</a></li>
                                    <li><a href="/aphia.php?p=browser"><span class="fa fa-sitemap fa-1x"></span>&nbsp;Taxon tree</a></li>
                                    <li><a href="/aphia.php?p=idkeys"><span class="fa fa-puzzle-piece fa-1x"></span>&nbsp;IDKeys</a></li>
                                </ul>
                            </li>
                            <li><a href="/aphia.php?p=manual"><span class="fa fa-book fa-1x"></span>&nbsp;Manual</a></li>
                                                                                                                                                                                                <li><a href="/aphia.php?p=login&amp;decodetype=1&amp;redirect=L2FwaGlhLnBocD9wPXRheGRldGFpbHMmYW1wO2lkPTExMw=="><span class="fa fa-lock fa-1x"></span>&nbsp;Log in</a></li>
                                                    </ul>
                    </div>
                </div>
            </div><!-- /.navbar-collapse -->
        </nav>
    </div>
</div>
<div class="container-fluid worms-content">
<div class="row">
                        <div class="worms_content_section worms_content_section_colored">
                            
<h2 style="color: #ff0000;">WoRMS Error</h2>
Query error<br><br><b>Please contact us at <a href="mailto:info@marinespecies.org">info@marinespecies.org</a> and supply us with the url you are browsing and the error message.<br>Thank you.</b>

                    <div class="panel panel-transparent">
                        <div class="panel-heading">
                            <h3>WoRMS taxon details</h3>
                        </div>
                        <div class="panel-body">
                            <div id="aphia_ct_tu_113" itemscope="" itemtype="http://rs.tdwg.org/dwc/terms/Taxon" class="">
                            
<h3 class="aphia_core_header-inline">
    <meta itemprop="kingdom" content="Animalia">
<meta itemprop="phylum" content="Mollusca">
<meta itemprop="class" content="Gastropoda">
<meta itemprop="subclass" content="Patellogastropoda">
<meta itemprop="superfamily" content="Patelloidea">

    <b><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Patellidae Rafinesque, 1815</b>
    <p class="h5 aphia_core_header-inline"></p>
</h3>
<div class="container-fluid">
                                     <div class="row form-horizontal">
        <div class="col-xs-12">
                <div class="pull-right " style="z-index: 10;">
                    <div class="pull_left_xs pull-right"></div>
                </div>
                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="AphiaID">AphiaID</label>
                <div id="AphiaID" class="col-xs-12 col-sm-8 col-lg-10 leave_image_space">
                        <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                    <p class="aphia_core_break-words">
                    113&nbsp;
                    <span class="aphia_core_cursor-help" title="This is a Life Sciences Identifier (LSID), a persistent globally unique identifier for this object. Use this LSID whenever you need to refer to this object">(urn:lsid:marinespecies.org:taxname:113)</span>
                    </p>
                        <div class="aphia_core_line_spacer_5px visible-xs"></div>

                </div>
                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Classification">Classification</label>
                <div id="Classification" class="col-xs-12 col-sm-8 col-lg-10">
                        <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                    <ol class="breadcrumb aphia_core_breadcrumb-classification leave_image_space">
                                                    <li>Biota</li>
                                                    <li><a href="aphia.php?p=taxdetails&amp;id=2"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Animalia</a>&nbsp;(Kingdom)</li>
                                                    <li><a href="aphia.php?p=taxdetails&amp;id=51"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Mollusca</a>&nbsp;(Phylum)</li>
                                                    <li><a href="aphia.php?p=taxdetails&amp;id=101"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Gastropoda</a>&nbsp;(Class)</li>
                                                    <li><a href="aphia.php?p=taxdetails&amp;id=382158"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Patellogastropoda</a>&nbsp;(Subclass)</li>
                                                    <li><a href="aphia.php?p=taxdetails&amp;id=156481"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Patelloidea</a>&nbsp;(Superfamily)</li>
                                                    <li><a href="aphia.php?p=taxdetails&amp;id=113"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Patellidae</a>&nbsp;(Family)</li>
                                            </ol>
                        <div class="aphia_core_line_spacer_5px visible-xs"></div>

                </div>
                                                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Status">Status</label>
                <div id="Status" class="col-xs-12 col-sm-8 col-lg-10">
                        <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                    <div class="leave_image_space">
                    <font color="#000000"><span style="cursor: help" title="Valid name (ICZN) or name considered to be taxonomically correct (ICBN)">accepted</span></font>
                    </div>
                        <div class="aphia_core_line_spacer_5px visible-xs"></div>

                </div>
                                                                                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Rank">Rank</label>
                <div id="Rank" class="col-xs-12 col-sm-8 col-lg-10">
                        <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                    <div class="leave_image_space">
                    Family
                    </div>
                        <div class="aphia_core_line_spacer_5px visible-xs"></div>

                </div>
                                                                                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Rank">Parent</label>
                <div id="Parent" class="col-xs-12 col-sm-8 col-lg-10">
                        <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                    <div class="leave_image_space">
                    <a href="aphia.php?p=taxdetails&amp;id=156481"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>Patelloidea Rafinesque, 1815</a>
                    </div>
                        <div class="aphia_core_line_spacer_5px visible-xs"></div>

                </div>
                                        </div>
    </div>
        <div class="row form-horizontal">
        <div class="col-xs-12">
                                            <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="ChildTaxa">Direct children (14)<br><small><a href="aphia.php?p=taxdetails&amp;id=113&amp;allchildren=1" rel="nofollow" title="Show all possible children">[show all]</a></small><br><small><a href="aphia.php?p=taxdetails&amp;id=113&amp;sortby=alpha" rel="nofollow" title="Sort children alphabetically, ignoring possible subgenera">[sort&nbsp;alpha..]</a></small></label>
            <div id="ChildTaxa" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                    <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                <span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=225717"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Cymbula</i> H. Adams &amp; A. Adams, 1854</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=151344"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Helcion</i> Montfort, 1810</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=138312"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patella</i> Linnaeus, 1758</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=1245553"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Proscutum</i> P. Fischer, 1885&nbsp;†</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=225716"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Scutellastra</i> H. Adams &amp; A. Adams, 1854</a></span><br>
<br><span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=574681"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Ancistromesus</i> Dall, 1871</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=225716"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Scutellastra</i> H. Adams &amp; A. Adams, 1854</a> (synonym)</span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=138311"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Ansates</i> G. B. Sowerby II, 1839</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=138312"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patella</i> Linnaeus, 1758</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=577938"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Costatopatella</i> Pallary, 1912</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=138312"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patella</i> Linnaeus, 1758</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=577939"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Laevipatella</i> Pallary, 1920</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=225717"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Cymbula</i> H. Adams &amp; A. Adams, 1854</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=577940"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patellastra</i> Monterosato, 1884</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=138312"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patella</i> Linnaeus, 1758</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=577942"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patellidea</i> Thiele, 1891</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=225716"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Scutellastra</i> H. Adams &amp; A. Adams, 1854</a> (synonym)</span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=577944"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patellona</i> Thiele, 1891</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=225717"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Cymbula</i> H. Adams &amp; A. Adams, 1854</a></span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=577945"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patellus</i> Montfort, 1810</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=138312"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patella</i> Linnaeus, 1758</a> (Invalid: unjustified emendation of <i>Patella</i>)</span><br>
<span class="aphia_core_pb-3">Genus <a href="aphia.php?p=taxdetails&amp;id=151348"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patina</i> Gray, 1847</a> accepted as <a href="aphia.php?p=taxdetails&amp;id=138312"><i role="button" tabindex="0" title="Item is checked" data-toggle="popover" class="fa fa-star aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><i>Patella</i> Linnaeus, 1758</a> (synonym)</span><br>

                    <div class="aphia_core_line_spacer_5px visible-xs"></div>

            </div>
            <div class="clearfix"></div>
                                    <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Environment">Environment</label>
            <div id="Environment" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                    <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                marine
                    <div class="aphia_core_line_spacer_5px visible-xs"></div>

            </div>
            <div class="clearfix"></div>
                                                    <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="OriginalDescription">Original description</label>
            <div id="OriginalDescription" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                    <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                Not documented<br>
                    <div class="aphia_core_line_spacer_5px visible-xs"></div>

            </div>
            <div class="clearfix"></div>
                                                                    <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Citation">Taxonomic citation</label>
            <div id="Citation" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                    <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                WoRMS (2018). Patellidae Rafinesque, 1815. Accessed at: http://www.marinespecies.org/aphia.php?p=taxdetails&amp;id=113 on 2018-08-07
                    <div class="aphia_core_line_spacer_5px visible-xs"></div>

            </div>
            <div class="clearfix"></div>
                                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="TaxonomicEditHistory">Taxonomic edit history</label>
            <div id="TaxonomicEditHistory" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                    <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                <div class="container-fluid row"><div class="row"><div class="col-xs-5 col-lg-3"><b>Date</b></div><div class="col-xs-3 col-lg-2"><b>action</b></div><div class="col-xs-4 col-lg-7"><b>by</b></div></div>
<div class="row"><div class="col-xs-5 col-lg-3">2004-12-21 15:54:05Z</div><div class="col-xs-3 col-lg-2">created</div><div class="col-xs-4 col-lg-7">db_admin</div></div>
<div class="row"><div class="col-xs-5 col-lg-3">2005-05-18 07:40:01Z</div><div class="col-xs-3 col-lg-2">changed</div><div class="col-xs-4 col-lg-7"><a href="http://www.marinespecies.org/imis.php?module=person&amp;persid=8159" target="_blank">Cuvelier, Daphne</a></div></div>
<div class="row"><div class="col-xs-5 col-lg-3">2011-05-02 17:58:21Z</div><div class="col-xs-3 col-lg-2">checked</div><div class="col-xs-4 col-lg-7"><a href="http://www.marinespecies.org/imis.php?module=person&amp;persid=7192" target="_blank">Bouchet, Philippe</a></div></div>
</div>

                    <div class="aphia_core_line_spacer_5px visible-xs"></div>

            </div>
            <div class="clearfix"></div>
                                    <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="Licensing">Licensing</label>
            <div id="Licensing" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                    <div class="aphia_core_line_spacer_7px hidden-xs"></div>

                <p><a href="http://creativecommons.org/licenses/by/4.0/deed.en" target="_blank"><img src="http://www.marinespecies.org/aphia/images/cc/by.png" align="absmiddle" width="80" height="15" border="0" alt="Creative Commons License"></a>&nbsp;The webpage text is licensed under a Creative Commons <a href="http://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">Attribution 4.0 License</a></p>

                    <div class="aphia_core_line_spacer_5px visible-xs"></div>

            </div>
            <div class="clearfix"></div>
                                <label class="col-xs-12 col-sm-4 col-lg-2 control-label" for="quick_links"></label>
        <div id="quick_links" class="col-xs-12 col-sm-8 col-lg-10 pull-left">
                <div class="aphia_core_line_spacer_7px hidden-xs"></div>

            <small>
            <a href="aphia.php?p=browser&amp;id=156481#focus">[taxonomic tree]</a>
            &nbsp;<a href="aphia.php?p=taxlist&amp;pid=113&amp;rComp=%3E%3D&amp;tRank=220">[list species]</a>            </small>
                <div class="aphia_core_line_spacer_5px visible-xs"></div>

        </div>
        <div class="clearfix"></div>
                </div>
    </div>
</div>
<br>
<script type="text/javascript">
            aphia_jquery(document).ready(function(){
            // show active tab
            if(location.hash) {
                aphia_jquery('a[href="' + location.hash + '"]').tab('show');
                aphia_jquery('a[href="' + location.hash + '"]').get(0).scrollIntoView(true);
            } else {
                //Activate first tab
                aphia_jquery('.nav-tabs a:first').tab('show');
            }

            // set hash on click without jump
            aphia_jquery(document.body).on("click", "a[data-toggle=tab]", function(e) {
                e.preventDefault();
                if(history.pushState) {
                    //Adapt browser URL (Append tab suffix)
                    history.pushState(null, null, this.getAttribute("href"));
                } else {
                    //Adapt browser URL (will cause page jump)
                    location.hash = this.getAttribute("href");
                }

                //After jump we still need to activate the tab
                aphia_jquery('a[href="' + location.hash + '"]').tab('show');
                if (location.hash=="#distributions" && aphia_jquery('#map').length) map.updateSize();
                return false;
            });
        });

        // set hash on popstate
        aphia_jquery(window).on('popstate', function() {
            //When the user pushes back => try to show the tab based on a possible hash
            var anchor = location.hash || aphia_jquery("a[data-toggle=tab]").first().attr("href");
            aphia_jquery('a[href="' + anchor + '"]').tab('show');
        });

</script>
<style>
    .tabtitle-editor-only {
        filter:alpha(opacity=45);
        filter: progid:DXImageTransform.Microsoft.Alpha(opacity=45);
        -moz-opacity:.45;
        opacity:.45;
        -khtml-opacity:.45
    }
</style>
<div class="container-fluid">
    <div class="panel panel-transparent panel-colored-tabs">
        <div class="panel-heading">
            <ul class="nav nav-tabs">
                            <li class="active"><a href="#sources" data-toggle="tab">Sources (3)</a></li>
    
                            <li class=""><a href="#distributions" data-toggle="tab">Documented distribution (0)</a></li>
    
                    
                    
                                                  <li class=""><a href="#vernaculars" data-toggle="tab">Vernaculars (4)</a></li>
    
                            <li class=""><a href="#links" data-toggle="tab">Links (4)</a></li>
    
                    
                    
                    
            </ul>
        </div>
        <div class="panel-body">
            <div class="tab-content">
                            <div id="sources" style="min-height: 250px" class="tab-pane active in">
            <b>basis of record</b>
<span id="aphia_ct_source_6852"> Bouchet P. &amp; Rocroi J.-P. (2005). Classification and nomenclator of gastropod families. <i>Malacologia</i>. 47(1-2): 1-397 ISBN 3-925919-72-4.&nbsp;<small><a href="aphia.php?p=sourcedetails&amp;id=6852">[details]</a>&nbsp;&nbsp;</small>&nbsp;<small></small><br></span><div style="clear:both;"></div>
<br><b>additional source</b>
<span id="aphia_ct_source_152262"> Nakano T. &amp; Sasaki T. (2011) Recent advances in molecular phylogeny, systematics and evolution of patellogastropod limpets. <i>Journal of Molluscan Studies</i> 77: 203-217.&nbsp;<small><a href="aphia.php?p=sourcedetails&amp;id=152262">[details]</a>&nbsp;&nbsp;</small>&nbsp;<small></small><br></span><div style="clear:both;"></div>
<br><b>additional source</b>
<span id="aphia_ct_source_6807"> Ridgeway, S.A., Reid, D.G., Taylor, J.D., Branch, G.M. &amp; Hodgson,  A.N., 1998. A cladistic phylogeny of the family Patellidae (Mollusca: Gastropoda). Philosophical transactions of the Royal Society of London, Series B,  353(1375), 1645-1671., <i>available online at</i> <a href="http://www.journals.royalsoc.ac.uk/(5sofuhbwdilsl445bwzyp0ab)/app/home/content.asp?referrer=contribution&amp;format=2&amp;page=1&amp;pagecount=27" style="word-break: break-all;" target="_blank">http://www.journals.royalsoc.ac.uk/(5sofuhbwdilsl445bwzyp0ab)/app/home/content.asp?referrer=contribution&amp;format=2&amp;page=1&amp;pagecount=27</a>&nbsp;<small><a href="aphia.php?p=sourcedetails&amp;id=6807">[details]</a>&nbsp;&nbsp;</small>&nbsp;<small></small><br></span><div style="clear:both;"></div>

        </div>
    
                            <div id="distributions" style="min-height: 250px" class="tab-pane ">
            
<table><tbody><tr><td><div style="width:600px; height:320px; border:1px solid; background-color: #fff;" id="map" class="olMap"><div id="OpenLayers_Map_13_OpenLayers_ViewPort" class="olMapViewport olControlDragPanActive olControlZoomBoxActive olControlPinchZoomActive olControlNavigationActive olControlSelectFeatureActive" style="position: relative; overflow: hidden; width: 100%; height: 100%;"><div id="OpenLayers_Map_13_OpenLayers_Container" style="position: absolute; z-index: 749; left: 0px; top: 0px;"><div id="OpenLayers_Layer_WMS_5" dir="ltr" class="olLayerDiv olLayerGrid" style="position: absolute; width: 100%; height: 100%; z-index: 100;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=-90,0,0,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 44px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=0,0,90,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 300px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=-90,-90,0,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 44px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=0,-90,90,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 300px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=-180,0,-90,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: -212px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=90,0,180,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 556px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=-180,-90,-90,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: -212px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://geo.vliz.be/geoserver/gwc/service/wms?LAYERS=BODC_GEBCO2014&amp;SRS=EPSG%3A4326&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;BBOX=90,-90,180,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 556px; top: 160px; width: 256px; height: 256px;"></div><div id="OpenLayers_Layer_WMS_1" dir="ltr" class="olLayerDiv olLayerGrid" style="position: absolute; width: 100%; height: 100%; z-index: 105; display: none;"></div><div id="OpenLayers_Layer_WMS_3" dir="ltr" class="olLayerDiv olLayerGrid" style="position: absolute; width: 100%; height: 100%; z-index: 110; display: none;"></div><div id="OpenLayers_Layer_WMS_11" dir="ltr" class="olLayerDiv olLayerGrid" style="position: absolute; width: 100%; height: 100%; z-index: 345;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-90,0,0,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 44px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=0,0,90,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 300px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-90,-90,0,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 44px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=0,-90,90,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 300px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-180,0,-90,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: -212px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=90,0,180,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 556px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-180,-90,-90,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: -212px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=90,-90,180,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 556px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=90,0,180,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: -468px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-180,0,-90,90&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 812px; top: -96px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=90,-90,180,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: -468px; top: 160px; width: 256px; height: 256px;"><img class="olTileImage" src="http://www.iobis.org/geoserver/wms?LAYERS=OBIS%3Adist_sp&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;VIEWPARAMS=where%3A(scientific%3D'Patellidae'%20or%20valid_id%20in%20(select%20valid_id%20from%20obis.tnames%20where%20worms_id%3D113))%3Btable%3Adist_sp_5deg%3Bcount_column%3Anincl&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-180,-90,-90,0&amp;WIDTH=256&amp;HEIGHT=256" style="visibility: inherit; opacity: 1; position: absolute; left: 812px; top: 160px; width: 256px; height: 256px;"></div><div id="OpenLayers_Layer_Vector_RootContainer_30" dir="ltr" class="olLayerDiv" style="position: absolute; width: 100%; height: 100%; z-index: 725; left: 0px; top: 0px;"><svg id="OpenLayers_Layer_Vector_RootContainer_30_svgRoot" width="600" height="320" viewBox="0 0 600 320" style="display: block;"><g id="OpenLayers_Layer_Vector_RootContainer_30_root" transform="" style="visibility: visible;"><g id="OpenLayers_Layer_Vector_RootContainer_30_vroot"></g><g id="OpenLayers_Layer_Vector_RootContainer_30_troot"></g></g></svg></div></div><div id="OpenLayers_Control_Zoom_16" class="olControlZoom olControlNoSelect" unselectable="on" style="position: absolute; z-index: 1004;"><a href="#zoomIn" class="olControlZoomIn olButton">+</a><a href="#zoomOut" class="olControlZoomOut olButton">−</a></div><div id="OpenLayers_Control_ArgParser_17" class="olControlArgParser olControlNoSelect" unselectable="on" style="position: absolute; z-index: 1004;"></div><div id="OpenLayers_Control_Attribution_18" class="olControlAttribution olControlNoSelect" unselectable="on" style="position: absolute; z-index: 1004;"></div><div id="OpenLayers_Layer_Google_9" dir="ltr" class="olLayerDiv" style="position: absolute; width: 100%; height: 100%; z-index: 115; display: none;"></div><div id="OpenLayers_Layer_Google_9_EventPane" style="position: absolute; z-index: 116; width: 100%; height: 100%; display: none;"></div><div id="OpenLayers_Control_SelectFeature_29" class="olControlSelectFeature olControlNoSelect" unselectable="on" style="position: absolute; z-index: 1005;"></div></div></div></td><td>&nbsp;</td><td valign="top"><div id="legend"><form action="#"><table><tbody><tr><td><div class="legendtext"><input name="layers" onclick="setlayer(0);" type="radio" checked="">GEBCO 2014<span><a href="http://www.gebco.net/" target="_blank" rel="noopener"><img src="http://www.vliz.be/gis/icons/info.gif" alt="Source: GEBCO" title="Source: GEBCO" border="0"></a></span></div>  </td></tr><tr><td><div class="legendtext"><input name="layers" onclick="setlayer(1);" type="radio">NOAA ETOPO1 <span><a href="http://www.ngdc.noaa.gov/mgg/global/global.html" target="_blank" rel="noopener"><img src="http://www.vliz.be/gis/icons/info.gif" alt="Source: NOAA" title="Source: NOAA" border="0"></a></span></div>  </td></tr><tr><td><div class="legendtext"><input name="layers" onclick="setlayer(2);" type="radio">Countries</div>  </td></tr><tr><td><div class="legendtext"><input name="layers" onclick="setlayer(3);" type="radio">Google satellite</div>  </td></tr><tr><td><div class="legendtext"><input name="layers" onclick="setlayer(4);" type="checkbox" checked="">OBIS occurrences (25208) <span><a href="http://iobis.org/mapper/?taxon=Patellidae" target="_blank"><img src="http://www.vliz.be/gis/icons/info.gif" alt="Source: Ocean Biogeographic Information System (OBIS)" title="Source: Ocean Biogeographic Information System (OBIS)" border="0"></a></span></div>  <img class="legendimage" src="http://www.iobis.org/geoserver/wms?&amp;service=WMS&amp;TRANSPARENT=true&amp;REQUEST=GetLegendGraphic&amp;VERSION=1.1.1&amp;FORMAT=image/png&amp;&amp;layer=OBIS%3Adist_sp"> </td></tr></tbody></table></form></div></td></tr></tbody></table>
<img style="background-color:#990000;opacity:0.5;height:10px;" src="http://www.marinespecies.org/aphia/images/circle.gif" border="0">&nbsp;<small>Present</small>&nbsp;<img style="background-color:#ffaa40;opacity:0.5;height:10px;" src="http://www.marinespecies.org/aphia/images/circle.gif" border="0">&nbsp;<small>Inaccurate</small>&nbsp;<img style="background-color:#8facac;opacity:0.5;height:10px;" src="http://www.marinespecies.org/aphia/images/circle.gif" border="0">&nbsp;<small>Introduced: alien</small>&nbsp;<img style="background-color:#020058;opacity:0.5;height:10px;" src="http://www.marinespecies.org/aphia/images/circle.gif" border="0">&nbsp;<small>Containing type locality</small>&nbsp;
<hr>
        </div>
    
                    
                    
                                                  <div id="vernaculars" style="min-height: 250px" class="tab-pane ">
            <table class="table table-striped"><tbody><tr><th>Language</th><th>Name</th><td>&nbsp;</td></tr><tr><td valign="top">
<span id="aphia_ct_vernacular_4845">Dutch</span></td><td valign="top"><meta itemprop="vernacularName" content="schaalhorens">
<span id="aphia_ct_vernacular_4845"><i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>schaalhorens</span></td><td valign="top">
<span id="aphia_ct_vernacular_4845">&nbsp;<small><a href="#" onclick="var hash_container = document.getElementById(location.hash.substring(1)); if (hash_container &amp;&amp; !$.contains(hash_container, this)){ location.hash=&quot;&quot; };showPopup(&quot;aphia.php?p=vernaculars&amp;id=4845&quot;, 555, 300); return false;">[details]</a></small></span></td></tr><tr><td valign="top">
<span id="aphia_ct_vernacular_9684">English</span></td><td valign="top"><meta itemprop="vernacularName" content="limpets">
<span id="aphia_ct_vernacular_9684"><i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>limpets</span></td><td valign="top">
<span id="aphia_ct_vernacular_9684">&nbsp;<small><a href="#" onclick="var hash_container = document.getElementById(location.hash.substring(1)); if (hash_container &amp;&amp; !$.contains(hash_container, this)){ location.hash=&quot;&quot; };showPopup(&quot;aphia.php?p=vernaculars&amp;id=9684&quot;, 555, 300); return false;">[details]</a></small></span></td></tr><tr><td valign="top">
<span id="aphia_ct_vernacular_62720">Japanese</span></td><td valign="top"><meta itemprop="vernacularName" content="ツタノハガイ">
<span id="aphia_ct_vernacular_62720"><i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>ツタノハガイ</span></td><td valign="top">
<span id="aphia_ct_vernacular_62720">&nbsp;<small><a href="#" onclick="var hash_container = document.getElementById(location.hash.substring(1)); if (hash_container &amp;&amp; !$.contains(hash_container, this)){ location.hash=&quot;&quot; };showPopup(&quot;aphia.php?p=vernaculars&amp;id=62720&quot;, 555, 300); return false;">[details]</a></small></span></td></tr><tr><td valign="top">
<span id="aphia_ct_vernacular_31261">Swedish</span></td><td valign="top"><meta itemprop="vernacularName" content="skålsnäckor">
<span id="aphia_ct_vernacular_31261"><i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i>skålsnäckor</span></td><td valign="top">
<span id="aphia_ct_vernacular_31261">&nbsp;<small><a href="#" onclick="var hash_container = document.getElementById(location.hash.substring(1)); if (hash_container &amp;&amp; !$.contains(hash_container, this)){ location.hash=&quot;&quot; };showPopup(&quot;aphia.php?p=vernaculars&amp;id=31261&quot;, 555, 300); return false;">[details]</a></small></span></td></tr></tbody></table>
        </div>
    
                            <div id="links" style="min-height: 250px" class="tab-pane ">
            <i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><a href="http://www.godac.jamstec.go.jp/bismal/j/view/9015448" target="_blank">To Biological Information System for Marine Life (BISMaL)</a>&nbsp;<small></small><br>
<i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><a href="http://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=6462&amp;lvl=0" target="_blank">To GenBank </a>&nbsp;<small></small><br>
<i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><a href="http://www.nmr-pics.nl/Patellidae/album/index.html" target="_blank">To image gallery of Natural History Museum Rotterdam</a>&nbsp;<small></small><br>
<i role="button" tabindex="0" title="Item is unreviewed" data-toggle="popover" class="fa fa-star-o aphia_icon_link" style="padding: 0 5px; color:#ffc02d;cursor:help;"></i><a href="http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=69746" target="_blank">To ITIS</a><br>

        </div>
    
                    
                    
                    
            </div>
        </div>
    </div>
</div>

                            </div>
                        </div>
                    </div>
<script src="http://www.vliz.be/gis/ol/OpenLayers.js" type="text/javascript"></script>
<script src="http://www.vliz.be/gis/ol/deprecated.js" type="text/javascript"></script>
<script type="text/javascript">
var map;
//var layerstack=new Array();
var GMLlayercnt=0;
var GMLlayers=new Array();
var GMLcontrols=new Array();
OpenLayers.IMAGE_RELOAD_ATTEMPTS = 7;
OpenLayers.Util.onImageLoadErrorColor = "transparent";

var VLIZGIS = VLIZGIS || {};
VLIZGIS.legend_all_show_controls=true;

/* loads layer from VLIZ servers: geo, mapserver or TMS (Tile Map Server) */
function addOLlayer(layerprop){
 var typelayer;
 if (typeof(layerprop.type)!='undefined') typelayer=layerprop.type;
  /*pieterm added active layer from url param*/
 var url_layer_param="";
 if(layerprop.layers==url_layer_param) {
	 layerprop.show="true";
 }	 
 
 var url;
 if(typelayer=='geo') url="http://geo.vliz.be/geoserver/wms";
 else url=layerprop.otherurl;

 if (layerprop.fname){
	var fname=layerprop.fname;
	var name=fname.substr(fname.indexOf(':')+1);
	var lname = name.replace('/ /','_');
 }

 //visiblity of layer
 var show
 if (layerprop.show){
	if(layerprop.show=="true") show=true; else show=false;
 }else{
	show=true;
 }

 var layers;
 if (layerprop.layers) layers=layerprop.layers;

 if(typelayer=='geo' || typelayer=='url'){
	//params
	var layerParam = {layers: layers, transparent: 'true'} ;
	if (layerprop.filter){
		var filter = layerprop.filter;
		if(filter.indexOf('viewparams')>=0){
			layerParam.viewparams=filter.substring(filter.indexOf('viewparams')+11);
		}else{
			layerParam.CQL_FILTER=filter;
		}
	}

	if (typeof(layerprop.cqlfilter)!='undefined') layerParam.CQL_FILTER=layerprop.cqlfilter;

	if(layerprop.style) layerParam.styles=layerprop.style;
	//options
	var options={ratio:1, nocontrols: true, legendgetcap:0, noproj:0};
	 ;
	if (layerprop.legendgetc) options.legendgetcap=layerprop.legendgetc;
	if (layerprop.noprojection) options.noproj=layerprop.noprojection;

	var lname = new OpenLayers.Layer.WMS(fname,url,layerParam,options);
	lname.visibility=show;
	map.addLayer(lname);

 }else if(typelayer=='map') {
	 var mapfile;
	 mapfile=layerprop.mapfile;
	 var options={buffer: 1,isBaseLayer: false};
	 if (layerprop.noprojection) options.noproj=layerprop.noprojection;

	 var lname = new OpenLayers.Layer.MapServer.Untiled(
		fname, url,
				{
				map:mapfile,mode:'map', format:'png',
				layers: layers, map_transparent:'ON'},options
				);
	 lname.visibility=show;
	 map.addLayer(lname);

 }else if(typelayer=='tms') {
	 var options={isBaseLayer: false};
	 if (layerprop.noprojection) options.noproj=layerprop.noprojection;
	 var lname = new OpenLayers.Layer.TMS (
		fname, url,
		{
			numZoomLevels: 18,
			type: 'png',
			getURL: getTileURL,
			isBaseLayer: false,
			displayOutsideMaxExtent: true
		}, options
	 );

	 lname.visibility=show;
	 map.addLayer(lname);
 }

 return lname;
}//end addOLlayer

var nextcolor=0;
var colors=new Array("#FF2222","#22FF22","#FFFF22","#FF22FF","#22FFFF","#BB4444","#44BB44","#BBBB44","#BB44BB","#44BBBB");


function getTileURL(bounds) {
	var res = this.map.getResolution();
	var x = Math.round((bounds.left - this.maxExtent.left) / (res * this.tileSize.w));
	var y = Math.round((this.maxExtent.top - bounds.top) / (res * this.tileSize.h));
	var z = this.map.getZoom();
	var limit = Math.pow(2, z);
	if (y < 0 || y >= limit) {
		return null;
	} else {
		x = ((x % limit) + limit) % limit;
		url = this.url;
		path= z + "/" + x + "/" + y + "." + this.type;
		if (url instanceof Array) {
			url = this.selectUrl(path, url);
		}
		return url+path;
	}
}

function addGMLlayer(name,searchURL,hidden,fixedpoint,pref_color,use_url,code_attribute,opacity)
{
	var color;
	var size;

	if(pref_color) color=(pref_color == 'color' ? "${color}" : pref_color );
	else color=colors[nextcolor];
	if (!opacity) opacity=1;
	if(fixedpoint) { size=1.5; } else { size="${size}"; };
	var defaultcontext = {
	 	getOpacity: function(feature) {
		             return(feature.layer.opacity);
					}
	 	,getColor: function(feature) {
		            if (feature.layer.color.indexOf('#')>-1) return feature.layer.color;
		            else return feature.attributes["color"];
		           }
	 	,getSize: featureGetSize
	 	,getzIndex: function(feature) {
		 			if (!isNaN(parseInt(feature.layer.zindex))) return feature.layer.zindex;
		 			else if (!isNaN(parseInt(feature.attributes["zindex"]))) return feature.attributes["zindex"];
		 			else return 0;
				  }
		,getgraphicName: function(feature) {
		            if (feature.layer.graphicName) return feature.layer.graphicName;
		 			else if (feature.attributes["graphicName"]) return feature.attributes["graphicName"];
		 			else return "circle";
		           }
	};

	var defaulttemplate = {
		fillColor: "${getColor}",
		fillOpacity: "${getOpacity}",
		strokeWidth: 0,
		pointRadius: "${getSize}",
		graphicZIndex: "${getzIndex}",
		graphicName: "${getgraphicName}"
	};

	var selectedtemplate = {
		fillColor: "${getColor}",
		fillOpacity: "${getOpacity}",
		strokeWidth: 1,
		pointRadius: "${getSize}",
		graphicZIndex: "${getzIndex}",
		graphicName: "${getgraphicName}",
		strokeColor: "#66ccff",
		cursor: "pointer"
	};

	var defaultstyle = new OpenLayers.Style(defaulttemplate, {context: defaultcontext});
	var selectstyle = new OpenLayers.Style(selectedtemplate, {context: defaultcontext});
	var myStyles = new OpenLayers.StyleMap({"default":defaultstyle,"select":selectstyle});

	var options={
		color: color,
		symbolsize: size,
		opacity: opacity,
		projection: new OpenLayers.Projection("EPSG:4326"),
		format: OpenLayers.Format.GML,
		formatOptions: {
			extractStyles: true,
			extractAttributes: true,
			useurl : use_url,
			useattribute: code_attribute
		},
		nocontrols: true,
		rendererOptions: { zIndexing: true }
	};

	GMLlayers[GMLlayercnt] = new OpenLayers.Layer.GML('Data:'+name,searchURL ,options);
	GMLlayers[GMLlayercnt].styleMap=myStyles;
	if(hidden) GMLlayers[GMLlayercnt].visibility=false;
	map.addLayer(GMLlayers[GMLlayercnt]);

	if(typeof(GMLcontrol)=='object') GMLcontrol.deactivate();

	GMLcontrol= new OpenLayers.Control.SelectFeature(
				GMLlayers,
				{hover: true, onSelect: onFeatureSelect , clickFeature: onFeatureClick, onUnselect: onFeatureUnselect });

	map.addControl(GMLcontrol);
	GMLcontrol.activate();
	GMLlayercnt++;
	nextcolor=nextcolor+1;
	if(nextcolor >= colors.length ) nextcolor=0;
}

function featureGetSize(feature) {
    if (!isNaN(parseFloat(feature.layer.symbolsize))) return feature.layer.symbolsize;
    else return feature.attributes["size"];
}

// te definieren in applicatie; gewoon assignem bv onFeatureClick= mijnfunctie
function onFeatureClick(feature) {
	var code;
 	code=(feature.layer.formatOptions['useattribute']?feature.attributes[feature.layer.formatOptions['useattribute']]:(feature.attributes['station'] ? feature.attributes['station'] : feature.attributes['code'] ));
 	code=code.replace(/ /,'');
 	if(feature.layer.formatOptions['useurl'])	window.open(feature.layer.formatOptions['useurl'] + code);
}

function onFeatureSelect(feature) {
	OpenLayers.Popup.COLOR="#EEEE00";
	var label = (feature.attributes['label'] ? feature.attributes['label']
						: "Station: " + feature.attributes['station'] );
	var ts ;
	if(feature.attributes['observation']) label+= '<br>' + feature.attributes['observation'];
	else if(feature.attributes['datetime']) label+= '<br>Time: ' + feature.attributes['datetime'];



	popup = new OpenLayers.Popup.Anchored('popup',
                             feature.geometry.getBounds().getCenterLonLat(),
                             null,
                             "<div style='font-size:.8em;margin-left:10px'>"+ label + "</div>", null);

	popup.autoSize=true;
    feature.popup = popup;
    map.addPopup(popup);
}

function onFeatureUnselect(feature) {
    map.removePopup(feature.popup);
    feature.popup.destroy();
    feature.popup = null;
}

function proj(){
//used in dataportal
}

function setlayer(i){
 if(map.layers[i].visibility){
	if(map.layers[i]==map.baseLayer) return;
	map.layers[i].setVisibility(false);
 }else{
	if(map.layers[i].isBaseLayer) map.setBaseLayer(map.layers[i]);
	map.updateSize();
	map.layers[i].setVisibility(true);
 }

 if(map.layers[i]!=map.baseLayer) {
	proj();
 }
 getlegend();
}

function legendcall(url,layer){
    var xhr;
	try{
		// Opera 8.0+, Firefox, Safari
		xhr = new XMLHttpRequest();
	}catch(e){
		// Internet Explorer Browsers
		try{
			xhr = new ActiveXObject("Msxml2.XMLHTTP");
		}catch(e){
			try{
				xhr = new ActiveXObject("Microsoft.XMLHTTP");
			}catch(e){
				// Something went wrong
				return false;
			}
		}
	}
	url=url.replace("http://", "");
	xhr.open('GET', 'index.php?call=legend&path='+encodeURI(url) +'&lname='+layer,false);
	xhr.send(null);

	if (xhr.status == 200) {
		return xhr.responseText
	}
}

function aftergetLegend(){
}

/* help functions for getlegend */
// gewoon genDiplay overschrijven om opacity controls etc niet te tonen
function genDisplayOptions(i){
	var checked;
	var next,prev,nstr,ostr,opacity,lstr,qstr,coloroptions,sizeoptions,opacityoptions;
	nstr=" ";
	ostr="";
	coloroptions="";
	sizeoptions="";
	opacityoptions="";
	next= checkIndex(i,1);
	prev= checkIndex(i,-1);

	if(map.layers[i].options['hidelegend']) lstr='show'; else lstr='hide';
	if(map.layers[i].options['nolegend']) lstr='';
	if(map.layers[i].options['disableWFSquery']) qstr='enable'; else qstr='disable';

	/* gml layers */
	if(typeof(map.layers[i].styleMap)!='undefined')
		for(ci=0;ci<colors.length;ci++) coloroptions+="<img src='http://www.vliz.be/gis/icons/circle.gif' onclick='changeColor("+i+","+ci+")'  style='background-color:"+colors[ci]+";' > "
	if(typeof(map.layers[i].styleMap)!='undefined')
		for(ci=1;ci<7;ci++) sizeoptions+="<img src='http://www.vliz.be/gis/icons/circle.gif' width="+ (ci *  2) +"px onclick='changeSize("+i+","+ci+")'  style='background-color:"+ map.layers[i].color   +";' > "
	if(typeof(map.layers[i].styleMap)!='undefined')
		for(ci=1;ci<10;ci++) opacityoptions+="<img src='http://www.vliz.be/gis/icons/circle.png' width=5px onclick='changeOpacity("+i+","+ci+")'  style='opacity:"+(ci/10)+  ";filter:alpha(opacity=" +(ci*10) + ");background-color:"+ map.layers[i].color   +";' > "
	else
		for(ci=1;ci<10;ci++) opacityoptions+="<img src='http://www.vliz.be/gis/icons/blackcircle.png' width=5px onclick='changeOpacity("+i+","+ci+")'  style='opacity:"+(ci/10)+ ";filter:alpha(opacity=" +(ci*10) +") ;background-color:white;' > "

/* opacity
opacity = (map.layers[i].opacity == null | typeof(map.layers[i].opacity)=='undefined'  | typeof(map.layers[i].opacity)=='NaN' | Math.round(map.layers[i].opacity * 10,1)/10==1 ? '1.0' : Math.round(map.layers[i].opacity * 10,1)/10 )
ostr = (opacity == 0.1 ? '' : "<a style='cursor:pointer;' title='decrease opacity' onclick='changeOpacity("+ i +",-0.1);'><image  width=12 src=http://www.vliz.be/gis/icons/minus.png></a>" );
ostr += (opacity == '1.0'  ? '' : "<a style='cursor:pointer' title='increase opacity' onclick='changeOpacity("+ i +", 0.1);'><image width=12 src=http://www.vliz.be/gis/icons/plus.png></a>" );
*/

	/* Z-order */
	if(typeof(prev) != 'undefined')
		nstr+="<a style='cursor:pointer' title='move under " + map.layers[prev].name.substr(map.layers[prev].name.indexOf(':')+1)  + " ' onclick='changeIndex("+ i +"," + prev +");'><image style='background-color:red;' width=12 src=http://www.vliz.be/gis/icons/mono/white/layers_2_icon&16.png></a>";
	if(typeof(next) != 'undefined')
		nstr+="<a style='cursor:pointer' title='move above " + map.layers[next].name.substr(map.layers[next].name.indexOf(':')+1) + " ' onclick='changeIndex("+ i +","+ next + ");'><image style='background-color:red;' width=12 src=http://www.vliz.be/gis/icons/mono/white/layers_1_icon&16.png></a>";
	if(typeof(checkorder(i))=='undefined') { nstr=''; lstr=''; } // oa background layers


	return("<div class='legendcontrols' >"
//	+(ostr.length> 1 ? "<span>Opacity:"+ opacity + " " + ostr + "</span>" :"")
	+(opacityoptions==''?'':"<span style='cursor:pointer' >opacity: "+opacityoptions+" </span>")
	+(coloroptions==''?'':"<br><span style='cursor:pointer' >color: "+coloroptions+" </span>")
	+(sizeoptions==''?'':"<br><span style='cursor:pointer' >size: "+sizeoptions+" </span>")
	+(nstr.length >1 ?  "<br><span>order:" + nstr + "</span>" : '' )
	//+(nstr.length >1 ?  "<br><span>z-order:" + checkorder(i) + " " + nstr + "</span>" : '' )
	+(lstr=='' ? '' :
	"<br><span style='cursor:pointer'  onclick='toggleOption("+i+",\"hidelegend\")'>" + lstr + " legend </span> " +
	"<br><span style='cursor:pointer' onclick='toggleOption("+i+",\"disableWFSquery\")'>" + qstr + " WFS query </span>" )
	+ "</div>" 	 );
}

function toggleOption(i,optionname){
var obj;
	if(map.layers[i].options[optionname])
		obj = eval("({" + optionname + ":false})");

	else
		obj = eval("({" + optionname + ":true})");

	map.layers[i].addOptions(obj);
	getlegend();
}

function checkorder(i){
	var ar= new Array(); var order;
	order=0;
	for(j=0;j<map.layers.length;j++)
		if(map.layers[j].visibility && !map.layers[j].isBaseLayer && typeof(map.layers[j].styleMap)=='undefined')
			ar[j]=order++;
	return(ar[i]);
}

function changeIndex(i,j){
	if(i==0) return;
	if(typeof(j)=='undefined') return;
	map.setLayerIndex(map.layers[i],j);
	getlegend();
}

function checkIndex(i,by){
	var j; var nextIndex;
	nextIndex==0;
	if(by==1){
		if(i==map.layers.length-1) return;
		for(j=i+1;j<map.layers.length;j++)
			if(map.layers[j].visibility && !map.layers[j].isBaseLayer && map.layers[j].name.indexOf('OpenLayers.Control')<0 && typeof(map.layers[j].styleMap)=='undefined') //vektorlagen doen dat soms
			{ nextIndex=map.getLayerIndex(map.layers[j]); break;}
	}
	else
	if(by==-1)
	{
		if(j==1) return;
		for(j=i-1;j>0;j--)
			if(map.layers[j].visibility && !map.layers[j].isBaseLayer && map.layers[j].name.indexOf('OpenLayers.Control')<0 && typeof(map.layers[j].styleMap)=='undefined')
			{ nextIndex=map.getLayerIndex(map.layers[j]);  break;}
	}

	if(nextIndex==0) return;
	if(typeof(nextIndex)=='undefined') return;
	return(nextIndex);
}


function changeOpacity(i,byOpacity) {
	if(byOpacity > 0.1 )
		map.layers[i].setOpacity(byOpacity / 10) ;
	else
		map.layers[i].setOpacity(map.layers[i].opacity + byOpacity > 1 ? 1 : (map.layers[i].opacity + byOpacity < 0.1 ? 0.1 : map.layers[i].opacity + byOpacity));
	if(typeof(map.layers[i].styleMap)!='undefined') map.layers[i].redraw(true);
	OpenLayers.Util.getElement('optionsdiv'+i).innerHTML=genDisplayOptions(i);
	getlegend();
}

function changeColor(i,ci) {
	map.layers[i].color=colors[ci];
	if(typeof(map.layers[i].styleMap)!='undefined') map.layers[i].redraw(true);
	OpenLayers.Util.getElement('optionsdiv'+i).innerHTML=genDisplayOptions(i);
	getlegend();
}

function changeSize(i,ci) {
	map.layers[i].symbolsize=ci;
	if(typeof(map.layers[i].styleMap)!='undefined') map.layers[i].redraw(true);
	OpenLayers.Util.getElement('optionsdiv'+i).innerHTML=genDisplayOptions(i);
	getlegend();
}

function hidetheme(layernr,hidden,doGetlegend){
	if (typeof(doGetlegend)=='undefined') {
		doGetlegend=true;
	}
	var i;
	var thistheme;
	var theme=map.layers[layernr].name.substring(0,map.layers[layernr].name.indexOf(':'));
	if(theme.indexOf('.'))	theme=theme.substring(theme.indexOf('.')+1);
	for(i=0;i < map.layers.length;i++){
		thistheme=map.layers[i].name.substring(0,map.layers[i].name.indexOf(':'));
		if(thistheme.indexOf('.'))	thistheme=thistheme.substring(thistheme.indexOf('.')+1);
		if(thistheme == theme)
			if(hidden) 	map.layers[i].addOptions({'hidetheme':true});
			else map.layers[i].addOptions({'hidetheme':false});

 	}//for
	if (doGetlegend){
		getlegend();
	}
}


/* till here the helper function

Generate the legend
(string) type= [null / all / active ]
*/
function getlegend(type){
 var i;
 //var j;
 var k;
 var str="";
 var checked;
 var lstr;
 var urstr;
 var mapstr;
 var ar;
 var istr;
 var displayname;
 var theme;
 var prevtheme;
 var layernames=new Array();
 var layernamesbase=new Array();

 for(i=0;i < map.layers.length;i++){
	if(map.layers[i].name.indexOf('OpenLayers')==-1){
		if (map.layers[i].isBaseLayer){
			layernamesbase.push(new Array(map.layers[i].name,i,map.layers[i].isBaseLayer));
		}else{
			
			layernames.push(new Array(map.layers[i].name,i,map.layers[i].isBaseLayer));
		}
	}
 }

layernames=layernames.sort();
layernames=layernamesbase.concat(layernames);

//store whether controls need to be displayed globally
if (typeof type !== 'undefined' && type=='all') VLIZGIS.legend_all_show_controls=false;
var display_method = getLegendDisplayMethod();

for(var k=0;k < layernames.length;k++){
  i=layernames[k][1];
  checked=""; lstr=""; mapstr="";urstr="";ar="";istr="";displayname="";theme="";
  if (display_method === 1 /*Remove xxx: prefix*/) {
    displayname=map.layers[i].name.substr(map.layers[i].name.indexOf(':')+1);
  } else {
    //Don't parse anything
    displayname=map.layers[i].name;
  }

  if(map.layers[i].isBaseLayer && map.layers[i].name.indexOf('HIDDEN')==-1)	theme='';
  else if(map.layers[i].name.indexOf(':'))	theme=map.layers[i].name.substring(0,map.layers[i].name.indexOf(':'));
  else theme='';

  if(theme.indexOf('.'))	theme=theme.substring(theme.indexOf('.')+1);

  // soms verdwijnt de kaart als je in FF naar een andere website gaat redrawing help dan misschien?
  map.layers[i].redraw();

	if(map.layers[i].isBaseLayer){
  	 	type=" type='radio'";
   		if(map.layers[i]== map.baseLayer)
   		checked=" checked ";
  		else {
			if(map.layers[i].disabled) checked=" disabled ";
			map.layers[i].visibility=false;
			map.layers[i].display();
		}
  	}
	else{
   		type=" type='checkbox' ";
   		if(map.layers[i].visibility) {
   		checked=" checked ";

		}

   		if(map.layers[i].disabled) checked+=" disabled ";
  	}



  if(map.layers[i].url && typeof(map.layers[i].url)=='string' && map.layers[i].params && map.layers[i].visibility )
	{
		if(map.layers[i].isBaseLayer || map.layers[i].params['nolegend'] ||   map.layers[i].options['hidelegend'] ){
			urstr='';
		}else{
			urstr=map.layers[i].url;
			if (map.layers[i].options['legendgetcap']==0){
				if(urstr.indexOf('?')==-1) urstr+='?';
				urstr+= "&service=WMS&TRANSPARENT=true&REQUEST=GetLegendGraphic&VERSION=1.1.1&FORMAT=image/png&";
				if(map.layers[i].params['map']) urstr+="&map=" + map.layers[i].params['map'];
				if(map.layers[i].params['CQL_FILTER']) urstr+='&CQL_FILTER=[' + escape(map.layers[i].params['CQL_FILTER'])+']';
				if(map.layers[i].params['SLD']) urstr+='&SLD=' + escape(map.layers[i].params['SLD']);
				if(map.layers[i].params['STYLES']) urstr+='&STYLE=' + map.layers[i].params['STYLES'];
			}
		}

		var layerstr=(typeof(map.layers[i].params['LAYERS'])=='string' ? map.layers[i].params['LAYERS'] :
						(typeof(map.layers[i].params['layers'])=='string' ? map.layers[i].params['layers'] :
						  (typeof(map.layers[i].params['LAYERS'])=='array' ? map.layers[i].params['LAYERS'][0] :
						    map.layers[i].name)));

		ar= layerstr.split(',');
		if(map.layers[i].options['legendgetcap']==0){
			if(ar.length >1)
			{
			 for(var j=0;j < ar.length; j++)
				{
				lstr+="<tr><td><div class='legendtext'>";
				if(ar[j]!=map.layers[i].name) lstr+= "<span style='margin-left:20px;' >"+ar[j]+"</span></div>";
				if(urstr) lstr+= "<img class='legendimage' src='" + urstr + "&layer=" + encodeURIComponent(ar[j]) + "'> ";
				lstr+= "</td></tr>" ;
				}
			}
			else if(ar.length==1 && urstr)
				istr="<img class='legendimage'  src='" + urstr + "&layer=" + encodeURIComponent(ar[0]) + "'> " ;
			else if(urstr)
				lstr="<tr><td ><img class='legendimage'  src='" + urstr +  "'></td></tr>" ;
		}else{
			if(ar.length >1){
			 for(var j=0;j < ar.length; j++){
				lstr+="<tr><td><div class='legendtext'>";
				if(ar[j]!=map.layers[i].name | ar.length>1) lstr+= "<span style='margin-left:20px;' >"+ar[j]+"</span></div>";
				if(urstr){
					lstr+= "<img class='legendimage' src='" + legendcall(urstr,ar[j]) + "'> ";
					lstr+= "</td></tr>" ;
				}
			 }
			}else if(ar.length==1 && urstr){
				istr="<img class='legendimage'  src='" + legendcall(urstr,ar[0]) + "'> " ;
			}else if(urstr){
				lstr="<tr><td ><img class='legendimage'  src='" + legendcall(urstr,map.layers[i].name) + "'></td></tr>" ;
			}
		}
	}
	else if(map.layers[i].color && map.layers[i].visibility){
			istr="<img src='http://www.vliz.be/gis/icons/circle.gif' class='legendimage' style='background-color:"+map.layers[i].color+";' > " ;
	}

	if(theme!='HIDDEN') {

	if(theme && theme!=prevtheme)
			if(map.layers[i].options['hidetheme'] )
			str+="<tr><td ><div onclick='hidetheme("+i+",false)' class='thematext'><img class=button  src=http://www.vliz.be/gis/icons/mono/white/sq_plus_icon&16_otherside.png /> "+theme+"</div></td></tr>";
		else
			str+="<tr><td ><div onclick='hidetheme("+i+",true)' class='thematext'><img class=button src=http://www.vliz.be/gis/icons/mono/white/sq_minus_icon&16_otherside.png /> "+theme+"</div></td></tr>";

	if (VLIZGIS.legend_all_show_controls) genDisplayOptions(i);

	if(!map.layers[i].options['hidetheme'] )
	{

	str+="<tr><td ><div class='legendtext'>";

	if(map.layers[i].visibility)
	{
	str+="<input name='layers' onclick='setlayer(" + i + ");'  " + type + checked  +  ">"+displayname;
	if(VLIZGIS.legend_all_show_controls && typeof(controls)!='undefined' && controls!="")
	str+="<img  class='button' onclick='toggleOption("+i+",\"nocontrols\")' src=http://www.vliz.be/gis/icons/mono/white/" 	+ (map.layers[i].options['nocontrols'] ? "sq_br_down_icon&16_otherside.png" : "sq_br_up_icon&16_otherside.png" ) + " />";
	  if(!map.layers[i].options['nocontrols'] && typeof(controls)!='undefined')
	  	str+="<div id='optionsdiv"+i +"'>" + controls + "</div>";
	}
	else str+="<input name='layers' onclick='setlayer(" + i + ");'  " + type + checked  +  ">"+displayname;

	str+="</div>  " + (VLIZGIS.legend_all_show_controls ? (istr + lstr) : '') + "</td></tr>"  ;
	}

	}
	prevtheme=theme;
 }

 OpenLayers.Util.getElement('legend').innerHTML="<form action=#><table >" + str + "</table></form>";
 aftergetLegend();
}//getlegend


//used by clickmap
function setHTML(response,event) {
 var str=response.responseText;
 OpenLayers.Util.getElement('nodelist').innerHTML += str;
}

// support GetFeatureInfo
function clickmap (e)
{
	OpenLayers.ProxyHost = 'geoserver.php?call=proxy&url='

	if(document.getElementById('nodelist')) document.getElementById('nodelist').innerHTML = "";
	var i;
	for(i=0;i<map.layers.length;i++)
	{ if(map.layers[i].visibility && typeof(map.layers[i].params)!='undefined' && !map.layers[i].options['disableWFSquery'])
		{
		if(map.layers[i].params.LAYERS)
        	var url =  map.layers[i].getFullRequestString(
            {
                REQUEST: "GetFeatureInfo",
                EXCEPTIONS: "application/vnd.ogc.se_xml",
                BBOX: map.getExtent().toBBOX(),
                X: Math.round(e.xy.x),
                Y: Math.round(e.xy.y),
                INFO_FORMAT: 'text/html',
                QUERY_LAYERS: map.layers[i].params.LAYERS,
                FEATURE_COUNT: 50,
                WIDTH: map.size.w,
                HEIGHT: map.size.h,
                server:'geo'
            }
			);
        else if(map.layers[i].params.layers)
            var url =  map.layers[i].getFullRequestString(
            {
                REQUEST: "GetFeatureInfo",
                EXCEPTIONS: "application/vnd.ogc.se_xml",
                BBOX: map.getExtent().toBBOX(),
                X: Math.round(e.xy.x),
                Y: Math.round(e.xy.y),
                INFO_FORMAT: 'text/html',
                VERSION:'1.0.0',
                QUERY_LAYERS: map.layers[i].params.layers,
                FEATURE_COUNT: 50,
                WIDTH: map.size.w,
                HEIGHT: map.size.h,
                server:'map'
            }
			);
			if(url)
			{
			// OpenLayers.loadURL(url, '', this, setHTML, setHTML);
			OpenLayers.loadURL(url, '', this, function(response){  setHTML(response,e); } , function(response){  setHTML(response,e); } );
    		}
		}
	}
OpenLayers.Event.stop(e);
}//clickmap
function formatposition(lonLat){

	return("<table width=170px ><tr><td width=50%>Lat: " +Math.round(lonLat.lat*100)/100 + "</td><td> Lon:" + Math.round(lonLat.lon*100)/100 + "</td></tr></table>" );
}

//Fix for legend cannot contains links => use can override this function
function getLegendDisplayMethod() {
    return 1; //Default should be parse due to backwards compatibility
    /*0) Don't parse */
    /*1) Remove xxx: prefix from map name */
}

</script>
<style>
.olImageLoadError {	display: none !important; }
.legendtext > input { margin-right: 5px!important; }
</style>
<script type="text/javascript">
 var map;
 //Antarctica Polar Stereographic
 Proj4js.defs['EPSG:3031'] = '+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs';
 if (typeof OpenLayers == "undefined" ) alert('Please enable OpenLayers');
 OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;
 var startbounds  = new OpenLayers.Bounds(141,70.5,-141,-70.5);
 var noaa="<span><a href=\"http://www.ngdc.noaa.gov/mgg/global/global.html\" target=\"_blank\" rel=\"noopener\"><img src=\"http://www.vliz.be/gis/icons/info.gif\" alt=\"Source: NOAA\" title=\"Source: NOAA\" border=\"0\" /></a></span>";
 var etopo1 = new OpenLayers.Layer.WMS(
  ":NOAA ETOPO1 "+ noaa, "http://geo.vliz.be/geoserver/gwc/service/wms",
   {
    layers: 'NOAA_ETOPO1',
	srs: 'EPSG:4326',
	format: 'image/png'
   }, {
    isBaseLayer: true,
    wrapDateLine: true
   }
 );

 var countries = new OpenLayers.Layer.WMS(
  ":Countries", "http://geo.vliz.be/geoserver/gwc/service/wms",
   {
    layers: 'World:worldcountries',
	format: 'image/png'
   }, {
    isBaseLayer: true,
    wrapDateLine: true
   }
 );

 //GEBCO
 var bodc="<span><a href=\"http://www.gebco.net/\" target=\"_blank\" rel=\"noopener\"><img src=\"http://www.vliz.be/gis/icons/info.gif\" alt=\"Source: GEBCO\" title=\"Source: GEBCO\" border=\"0\" /></a></span>";
 var gebco = new OpenLayers.Layer.WMS(
  ":GEBCO 2014"+bodc, "http://geo.vliz.be/geoserver/gwc/service/wms",
 {layers: 'BODC_GEBCO2014', srs: 'EPSG:4326', format: 'image/png'},
 {buffer: 0,
  isBaseLayer: true,
  maxResolution: 0.703125,
  units: 'degrees',
  maxExtent: new OpenLayers.Bounds(-180, -90, 180, 90),
  projection: 'EPSG:4326',
  wrapDateLine: true
 }
 );

 //IBCSO Antarctic
 var ibcso="<span><a href=\"http://www.ibcso.org/\" target=\"_blank\" rel=\"noopener\"><img src=\"http://www.vliz.be/gis/icons/info.gif\" alt=\"Source: International Bathymetric Chart of the Southern Ocean (IBCSO)\" title=\"Source: International Bathymetric Chart of the Southern Ocean (IBCSO)\" border=\"0\" /></a></span>";
 var antarctica = new OpenLayers.Layer.WMS(
  ":IBCSO (Antarctica)"+ibcso, "http://geo.vliz.be/geoserver/gwc/service/wms",
  {layers: 'IBCSO:antarctica_background', srs:"EPSG:3031", format: 'image/png'},
  {isBaseLayer: true,
   projection: "EPSG:3031",
   maxExtent: new OpenLayers.Bounds(-3333134.0274246735, -3333134.0274246735, 3333134.0274246735, 3333134.0274246735),
   units: 'm'
   }
 );

 //GOOGLE
 var gsat = new OpenLayers.Layer.Google(
    ":Google satellite",
    {isBaseLayer: true,
	 type: google.maps.MapTypeId.SATELLITE,
	 maxResolution: 156543.0339,
	 maxExtent: new OpenLayers.Bounds(-20037508.34, -20037508.34, 20037508.34, 20037508.34),
	 sphericalMercator: true,
	 units: 'm',
	visibility: false	 }
 );

    var obisCount = "(25208) ";
    var iobis="<span><a href=\"http://iobis.org/mapper/?taxon=Patellidae\" target=\"_blank\"><img src=\"http://www.vliz.be/gis/icons/info.gif\" alt=\"Source: Ocean Biogeographic Information System (OBIS)\" title=\"Source: Ocean Biogeographic Information System (OBIS)\" border=\"0\" /></a></span>";
    var obis = new OpenLayers.Layer.WMS(
     ":OBIS occurrences "+obisCount+iobis, "http://www.iobis.org/geoserver/wms",
       {
        layers: 'OBIS:dist_sp',
		format: 'image/png',
		transparent: 'true',
		viewparams: 'where:(scientific=\'Patellidae\' or valid_id in (select valid_id from obis.tnames where worms_id=113));table:dist_sp_5deg;count_column:nincl'
       }, {
	    buffer: 1, visibility: true, transparent: true, legendgetcap: 0
	   }
     );
 	var map_options = {
 	  displayProjection: new OpenLayers.Projection("EPSG:4326"),
      maxExtent: new OpenLayers.Bounds(-180, -90, 180, 90)
    };
	map = new OpenLayers.Map('map',map_options);
	var navControl = map.getControlsByClass('OpenLayers.Control.Navigation')[0];
	if (navControl) navControl.disableZoomWheel();
	var EPSG4326 = new OpenLayers.Projection("EPSG:4326");
	var EPSG3031 = new OpenLayers.Projection("EPSG:3031");
	var EPSG900913 = new OpenLayers.Projection("EPSG:900913");
    var oldproj = null;
    var newproj = null;

map.addLayers([gebco,etopo1,countries,gsat]);
map.addLayers([obis]);

oldproj = map.getProjectionObject();
var GMLlayers=new Array();
setTimeout("map.zoomToExtent(map.maxExtent,true);",100);
 //Handle legend
 if (map) {
     getlegend();
 }

if(typeof(GMLcontrol)=='object') GMLcontrol.deactivate();
GMLcontrol= new OpenLayers.Control.SelectFeature(
				GMLlayers,
				{hover: true,
				 onSelect: onFeatureSelect,
				 /*clickFeature: onFeatureClick,*/
				 onUnselect: onFeatureUnselect });

map.addControl(GMLcontrol);
GMLcontrol.activate();

function onFeatureSelect(feature) {
	OpenLayers.Popup.COLOR="#EEEE00";
	var label = (feature.attributes['label'] ? feature.attributes['label']: "" );
	popup = new OpenLayers.Popup.Anchored('popup',
                             feature.geometry.getBounds().getCenterLonLat(),
                             null,
                             "<div style='font-size:.8em;margin-left:10px'>"+ label + "</div>", null);

	popup.autoSize=true;
    feature.popup = popup;
    map.addPopup(popup);
}

function onFeatureUnselect(feature) {
    map.removePopup(feature.popup);
    feature.popup.destroy();
    feature.popup = null;
}

function reprojectGML(oldp,newp){
 for(var j=0; j < GMLlayers.length; j++) {
  var features = GMLlayers[j].features;
  for(var i=0; i < features.length; i++) {
   var feature = features[i];
   feature.geometry.transform(oldp,newp);
  }
 }
}

//zoom to BBOX
map.events.register('changebaselayer', map, function(evt) {
 newproj = map.getProjectionObject();
 if (evt.layer.projection=="EPSG:3031") {
  var bounds=evt.layer.maxExtent;
 }else{
  var bounds = new OpenLayers.Bounds(141,70.5,-141,-70.5);
  bounds.transform(EPSG4326,newproj);
 }
 reprojectGML(oldproj,newproj);
 map.zoomToExtent(bounds,true);
 oldproj = map.getProjectionObject(); //save current projection
});

</script>
                        </div>
                    </div>
</div>
<div class="container-fluid worms-footer">
    <br>
    <div class="row">
        <div class="col-xs-6 col-md-3">
            <div class="worms-footer-column">
                <h4>WoRMS</h4>
                <ul class="worms-footer-list">
                    <li><a href="/about.php#what_is_worms">What is WoRMS</a></li>
                    <li><a href="/lifewatch.php">What is LifeWatch</a></li>
                    <li><a href="/subregisters.php">Subregisters</a></li>
                    <li><a href="/about.php#partners">Partners</a></li>
                    <li><a href="/about.php#users">WoRMS users</a></li>
                    <li><a href="/wormsliterature.php">WoRMS in literature</a></li>
                </ul>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="worms-footer-column">
                <h4>Using WoRMS</h4>
                <ul class="worms-footer-list">
                    <li><a href="/about.php#cite_worms">Citing WoRMS</a></li>
                    <li><a href="/about.php#terms">Terms of use</a></li>
                    <li><a href="/usersrequest.php">Request access</a></li>
                </ul>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="worms-footer-column">
                <h4>Tools</h4>
                <ul class="worms-footer-list">
                    <li><a href="aphia.php?p=match">WoRMS Match Taxa</a></li>
                    <li><a href="http://www.lifewatch.be/data-services/" target="_blank">LifeWatch Match Taxa</a></li>
                    <li><a href="aphia.php?p=webservice">Webservices</a></li>
                </ul>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="worms-footer-column">
                <h4>Connect with us</h4>
                <ul class="worms-footer-list">
                    <li>
                        <a href="#" onclick="var addr=$('&lt;textarea/&gt;').html('&amp;#105;&amp;#110;&amp;#102;&amp;#111;&amp;#64;&amp;#109;&amp;#97;&amp;#114;&amp;#105;&amp;#110;&amp;#101;&amp;#115;&amp;#112;&amp;#101;&amp;#99;&amp;#105;&amp;#101;&amp;#115;&amp;#46;&amp;#111;&amp;#114;&amp;#103;').text();var check; var self=this;$(window).blur(function(){clearTimeout(check);});check=setTimeout(function(){self.innerText=addr;},3000);window.location.href='mailto:' + addr + '?subject=WoRMS Contact'; return false;"><i class="fa fa-envelope" aria-hidden="true"></i>Send us an email</a>
                    </li>
                    <li>
                        <a href="https://twitter.com/WRMarineSpecies" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i>Twitter page</a>
                    </li>
                    <li>
                                                <a href="aphia.php?p=rss" target="_blank"><i class="fa fa-rss fa-1x" aria-hidden="true"></i>RSS Feed</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <hr class="worms-footer-splitter">
    </div>
    <div class="row">
        <div class="worms-footer-hosted_by text-center">
            <small>Website and databases developed and hosted by
                <a href="http://www.vliz.be" target="_blank">Flanders Marine Institute</a> · Page generated on 2018-08-07 03:23:45+02:00 · <a href="http://www.vliz.be/privacy" target="_blank">Privacy and cookie policy</a>
            </small>
        </div>
    </div>
</div>
</div>

<div style="position: absolute; left: 0px; top: -2px; height: 1px; overflow: hidden; visibility: hidden; width: 1px;"><span style="position: absolute; font-size: 300px; width: auto; height: auto; margin: 0px; padding: 0px; font-family: Roboto, Arial, sans-serif;">BESbswy</span></div></body></html>